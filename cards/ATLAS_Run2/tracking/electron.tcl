set EfficiencyFormula {
    (pt > 15) * (abs(eta) <= 2.47) * (

        # --- Î·-dependent efficiency ---
        (
            ((eta >= -2.47) && (eta < -2.3721))*0.972 +
            ((eta >= -2.3721) && (eta < -2.0143))*0.9846 +
            ((eta >= -2.0143) && (eta < -1.814))*0.9772 +
            ((eta >= -1.814) && (eta < -1.5206))*0.9792 +
            ((eta >= -1.5206) && (eta < -1.375))*0.9738 +
            ((eta >= -1.375) && (eta < -1.1556))*0.9804 +
            ((eta >= -1.1556) && (eta < -0.805))*0.9862 +
            ((eta >= -0.805) && (eta < -0.6))*0.9885 +
            ((eta >= -0.6) && (eta < -0.1038))*0.9881 +
            ((eta >= -0.1038) && (eta < -0.0036))*0.9821 +
            ((eta >= -0.0036) && (eta < 0.0966))*0.9875 +
            ((eta >= 0.0966) && (eta < 0.5975))*0.9895 +
            ((eta >= 0.5975) && (eta < 0.7979))*0.9911 +
            ((eta >= 0.7979) && (eta < 1.1413))*0.9859 +
            ((eta >= 1.1413) && (eta < 1.3631))*0.9823 +
            ((eta >= 1.3631) && (eta < 1.5134))*0.9748 +
            ((eta >= 1.5134) && (eta < 1.8068))*0.9801 +
            ((eta >= 1.8068) && (eta < 2.0072))*0.9754 +
            ((eta >= 2.0072) && (eta < 2.3649))*0.985 +
            ((eta >= 2.3649) && (eta < 2.47))*0.9728
        )

        *

        # --- pT-dependent efficiency ---
        (
            ((pt > 15) && (pt <= 19.898))*0.978 +
            ((pt > 19.898) && (pt <= 24.83))*0.983 +
            ((pt > 24.83) && (pt <= 29.932))*0.982 +
            ((pt > 29.932) && (pt <= 35.034))*0.982 +
            ((pt > 35.034) && (pt <= 40.136))*0.983 +
            ((pt > 40.136) && (pt <= 44.898))*0.985 +
            ((pt > 44.898) && (pt <= 50.0))*0.986 +
            ((pt > 50.0) && (pt <= 59.864))*0.986 +
            ((pt > 59.864) && (pt <= 79.932))*0.988 +
            (pt > 79.932)*0.99
        )
    ) +
    (abs(eta) >= 2.47)*0
}
